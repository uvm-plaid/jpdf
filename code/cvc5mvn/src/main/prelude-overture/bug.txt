//
// This program illustrates a bug in the Prelude Hoare logic inference prior
// to November, 2025 (spec available as hoare.tex in jpdf/esop25).
//
cmdfunctions:

precondition: ( m[x ++ "bar"]@1 == 0 )
f(x : string) {
    assert(m[x ++ "bar"] = 0)@1
}
postcondition: ( m[x ++ "bar"]@1 == 0 )

precondition: ( T )
main() {
    f("foo")
}
postcondition: ( m["foobar"]@1 == 0 )
