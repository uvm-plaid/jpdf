let wla = { k = flip[2,"fwl1"]; p = flip[2,"pwl1"] } in
let wlb = { k = flip[2,"fwl2"]; p = flip[2,"pwl2"] } in
let wlc = { k = flip[2,"fwlo"]; p = flip[2,"fwlo"] } in
let null = garbledecode(wlc) in
let null = andgate("0",wla,wlb,wlc) in
v[1,"k1"] := select[s[1,"0"],wla.k,(not wla.k)];
v[1,"p1"] := select[s[1,"0"],wla.p,(not wla.p)];
v[1,"k2"] := select[s[2,"0"],wlb.k,(not wlb.k)];
v[1,"p2"] := select[s[2,"0"],wlb.p,(not wlb.p)];
v[0,"out1"] := decode(evalgate("0",{ k = v[1,"k1"]; p = v[1,"p1"] },{k = v[1,"k2"]; p = v[1,"p2"] }))